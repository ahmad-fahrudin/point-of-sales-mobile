<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Struk Pembayaran</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @page {
            size: 80mm auto;
            margin: 0;
        }
        
        body {
            font-family: 'Courier New', monospace;
            line-height: 1.3;
            color: #000000;
            background: #ffffff;
            padding: 5mm 5mm 3mm 5mm;
            font-size: 10pt;
            width: 80mm;
        }
        
        .receipt-header {
            text-align: center;
            padding-bottom: 6px;
            margin-bottom: 8px;
            border-bottom: 2px dashed #000000;
        }
        
        .logo-img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            margin: 0 auto 8px;
            display: block;
            filter: grayscale(100%);
        }
        
        .company-name {
            font-size: 14pt;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .company-info {
            font-size: 9pt;
            line-height: 1.3;
        }
        
        .receipt-title {
            text-align: center;
            font-size: 12pt;
            font-weight: bold;
            text-transform: uppercase;
            margin: 8px 0 6px;
            letter-spacing: 1px;
        }
        
        .receipt-meta {
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px dashed #000000;
            font-size: 9pt;
        }
        
        .meta-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
        }
        
        .meta-label {
            font-weight: bold;
        }
        
        .items-section {
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px dashed #000000;
        }
        
        .items-header {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            margin-bottom: 4px;
            padding-bottom: 3px;
            border-bottom: 1px solid #000000;
            font-size: 9pt;
        }
        
        .item-row {
            margin-bottom: 6px;
        }
        
        .item-name {
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .item-details {
            display: flex;
            justify-content: space-between;
            font-size: 9pt;
        }
        
        .summary-section {
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 2px solid #000000;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
            font-size: 10pt;
        }
        
        .summary-row.total {
            font-weight: bold;
            font-size: 12pt;
            margin-top: 4px;
            padding-top: 4px;
            border-top: 1px solid #000000;
        }
        
        .summary-row.payment {
            margin-top: 6px;
            padding-top: 3px;
            border-top: 1px dashed #000000;
        }
        
        .summary-row.change {
            font-weight: bold;
            margin-top: 3px;
        }
        
        .footer-section {
            text-align: center;
            margin-top: 8px;
            padding-top: 6px;
            border-top: 1px dashed #000000;
            font-size: 9pt;
        }
        
        .footer-section p {
            margin: 2px 0;
        }
        
        .thank-you {
            font-weight: bold;
            font-size: 11pt;
            margin-top: 6px;
            margin-bottom: 2px;
        }
        
        @media print {
            body {
                padding: 5mm 5mm 3mm 5mm;
            }
        }
    </style>
</head>
<body>
    <!-- Receipt Header -->
    <div class="receipt-header">
        <img src="{{logoBase64}}" alt="Logo" class="logo-img" />
        <div class="company-name">Warung ANG27</div>
        <div class="company-info">
            Jl. Contoh No. 123, Kota<br>
            Telp: (021) 1234-5678
        </div>
    </div>
    
    <!-- Receipt Title -->
    <div class="receipt-title">STRUK PEMBAYARAN</div>
    
    <!-- Receipt Metadata -->
    <div class="receipt-meta">
        <div class="meta-row">
            <span class="meta-label">No. Transaksi:</span>
            <span>{{orderId}}</span>
        </div>
        <div class="meta-row">
            <span class="meta-label">Tanggal:</span>
            <span>{{date}}</span>
        </div>
        <div class="meta-row">
            <span class="meta-label">Waktu:</span>
            <span>{{time}}</span>
        </div>
        {{#if customerName}}
        <div class="meta-row">
            <span class="meta-label">Pelanggan:</span>
            <span>{{customerName}}</span>
        </div>
        {{/if}}
        <div class="meta-row">
            <span class="meta-label">Kasir:</span>
            <span>Admin</span>
        </div>
    </div>
    
    <!-- Items Section -->
    <div class="items-section">
        <div class="items-header">
            <span>Item</span>
            <span>Subtotal</span>
        </div>
        
        {{#each items}}
        <div class="item-row">
            <div class="item-name">{{productName}}</div>
            <div class="item-details">
                <span>{{quantity}} x Rp {{formatPrice price}}</span>
                <span>Rp {{formatPrice subtotal}}</span>
            </div>
        </div>
        {{/each}}
    </div>
    
    <!-- Summary Section -->
    <div class="summary-section">
        <div class="summary-row">
            <span>Subtotal:</span>
            <span>Rp {{subtotal}}</span>
        </div>
        
        <div class="summary-row total">
            <span>TOTAL:</span>
            <span>Rp {{total}}</span>
        </div>
        
        {{#if paymentAmount}}
        <div class="summary-row payment">
            <span>Bayar ({{paymentMethodLabel}}):</span>
            <span>Rp {{paymentAmount}}</span>
        </div>
        {{/if}}
        
        {{#if change}}
        <div class="summary-row change">
            <span>Kembalian:</span>
            <span>Rp {{change}}</span>
        </div>
        {{/if}}
    </div>
    
    <!-- Footer Section -->
    <div class="footer-section">
        <p>Barang yang sudah dibeli</p>
        <p>tidak dapat ditukar/dikembalikan</p>
        <p class="thank-you">TERIMA KASIH</p>
        <p>Atas kunjungan Anda</p>
    </div>
</body>
</html>
